{"version":3,"sources":["webpack://generator/webpack/bootstrap","webpack://generator/./src/generator.js","webpack://generator/./src/solver.js"],"names":["getInitState","fillVal","Array","fill","map","createCompletedPuzzle","numGivens","initState","newState","addRandomValuesToState","console","log","fixedVals","row","val","result","newerSolve","copyState","state","i","copy","isArray","slice","length","numVals","x","getRandom","y","allowed","getRandomArrayVal","lowerBound","upperBound","Math","floor","random","arr","generate","difficulty","completedPuzzle","newSolve","nextCell","prevCell","finalState","finalAllowed","undefined","nextY","nextX","allowedVals","newVal","find","curY","curX","getValidAllowed","invalidVals","filter","includes","tryVal","solved","completedState","concat","newInvalid","invRow","invY","getAdjacentValues","coord","xVals","yVals","squareVals","getValues","getSquareCoords","getSquare","getAdjacentCoords","xCoords","yCoords","squareCoords","getAdjacentCoordsInclusive","checkForSolution","adjacentCoords","getAllowed","xAllowed","getXAllowed","yAllowed","getYAllowed","squareAllowed","getSquareAllowed","options","getOptions","err","Error","data","coords","xNonOptions","getNonOptions","yNonOptions","squareNonOptions","arrayContainsArray","containerArray","array","item","arrayIntersect","arrs","reduce","intersecting","set1","Set","set2","has","pop","adjacent","adjacentVals","num","adjCoordsInc","xMatching","findMatching","yMatching","squareMatching","forEach","arraysAreIdentical","match","xNullCoords","filterNullCoords","xExistingVals","xNonExistingVals","xEval","available","matching","matchingOps","otherCoord","nullCoords","nonNullCoords","nullCoordNonOptions","nonOptions","nullCoord","option","remainingNonOptions","index","op","from","coordinates","getValue","onlyNulls","coordinate","square","some","squareCoordMap","getUniqueValues","arr1","arr2","isSolved","checkSolutionIsValid","valsAreValid","sort","rows","cols","squares","rowsValid","every","colsValid","squaresValid","solveShallow","prevState","error","printState","solveDeep","solveAttempt","numFilledCells","numFilled","numFilled2","cell","entries","testState","text","rowString","rowText","rowIndex","isValidValue","parseState","inputState","solve","startState"],"mappings":"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","file":"generator.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/generator.js\");\n","import solve, {arraysAreIdentical, getAllowed, isSolved, printState} from './solver';\n\nfunction getInitState(fillVal = null) {\n  return Array(9).fill([]).map(() => [...(Array(9).fill(fillVal))]);\n}\n\nconst createCompletedPuzzle = () => {\n  const numGivens = 11;\n  const initState = getInitState();\n  const newState = addRandomValuesToState(initState, numGivens);\n  console.log(printState(newState));\n  const fixedVals = newState.map(row => {\n    return row.map(val => val === null ? null : 'fixed');\n  });\n  const result = newerSolve(newState, [0,0], getInitState([]), fixedVals);\n  console.log(result);\n  // console.log(printState(result));\n};\n\n// const copyState = state => state.map(row => row.slice());\nfunction copyState(state) {\n  let i, copy;\n  if( Array.isArray( state ) ) {\n    copy = state.slice( 0 );\n    for( i = 0; i < copy.length; i++ ) {\n      copy[ i ] = copyState( copy[ i ] );\n    }\n    return copy;\n  } else if( state !== null && typeof state === 'object' ) {\n    throw 'Cannot clone array containing an object!';\n  } else {\n    return state;\n  }\n}\n\n\nfunction addRandomValuesToState(state, numVals = 1, ) {\n  if (numVals === 0) return state;\n  const x = getRandom(0, 8);\n  const y = getRandom(0, 8);\n  if (state[y][x] !== null) return addRandomValuesToState(state, numVals);  // If already added a value here, try again\n  const allowed = getAllowed(state, [y, x]);\n  state[y][x] = getRandomArrayVal(allowed);\n  return addRandomValuesToState(state, numVals - 1);\n}\n\nconst getRandom = (lowerBound = 1, upperBound = 9) => {\n  return Math.floor(Math.random() * upperBound) + lowerBound;\n};\n\nconst getRandomArrayVal = (arr) => {\n  return arr[getRandom(0, arr.length)];\n};\n\nconst generate = (difficulty = 'medium') => {\n  const completedPuzzle = createCompletedPuzzle();\n};\n\nfunction newSolve(state, [y, x]) {\n  const nextCell = () => {\n    if (x === 8 && y === 8) return null;\n    if (x === 8) return [y + 1, 0];\n    return [y, x + 1];\n  };\n  const prevCell = () => {\n    if (x === 0 && y === 0) return null;\n    if (x === 0) return [y - 1, 0];\n    return [y, x - 1];\n  };\n  // const allowed = allowedVals ? allowedVals : getAllowed(state, [y, x]);\n  if (nextCell() === null && state[y][x] !== null) return state;\n  if (nextCell() === null) {\n    const finalState = copyState(state);\n    const finalAllowed = getAllowed(state, [8,8]);\n    if (finalAllowed.length) {\n      return finalAllowed[0];\n      // finalState[y][x] = finalAllowed[0];\n      // console.log(printState(finalState));\n      // return finalState;\n    }\n    return undefined;\n  }\n  const [nextY, nextX] = nextCell();\n  if (state[y][x] === null) {\n    const allowedVals = getAllowed(state, [y, x]);\n    const newVal = allowedVals.find((val) => {\n      console.log(`attempting ${val} on [${y}, ${x}]`);\n      const newState = copyState(state);\n      newState[y][x] = val;\n      return newSolve(newState, [nextY, nextX]) !== undefined;\n    });\n    if (newVal === undefined) return undefined;\n    const newState = copyState(state);\n    newState[y][x] = newVal;\n    console.log(printState(newState));\n    return newSolve(newState, [nextY, nextX]);\n  }\n  return newSolve(state, [nextY, nextX]);\n}\n\nconst nextCell = (curY, curX) => {\n  if (curX === 8 && curY === 8) return null;\n  if (curX === 8) return [curY + 1, 0];\n  return [curY, curX + 1];\n};\n\n// const prevCell = () => {\n//   if (x === 0 && y === 0) return null;\n//   if (x === 0) return [y - 1, 0];\n//   return [y, x - 1];\n// };\n\nconst getValidAllowed = (state, [y, x], invalidVals) => {\n  return getAllowed(state, [y, x])\n    .filter(val => !invalidVals[y][x].includes(val));\n};\n\nfunction newerSolve(state, [y, x], invalidVals, fixedVals) {\n  if (fixedVals[y][x] === 'fixed') {\n    // newState = undefined;\n    const [nextY, nextX] = nextCell(y, x);\n    return newerSolve(state, [nextY, nextX], invalidVals, fixedVals);\n  }\n  const allowedVals = getValidAllowed(state, [y, x], invalidVals);\n  if (!allowedVals.length) return false;\n  const tryVal = allowedVals[0];\n  console.log(printState(state));\n  console.log(\"allowed: \" + allowedVals);\n  console.log(\"tryVal: \" + tryVal + \" on \" + y + \", \" + x);\n  // console.log(state);\n  let newState = copyState(state);\n  newState[y][x] = tryVal;\n  if (y === 8 && x === 8) return {solved: true, completedState: newState};\n  const [nextY, nextX] = nextCell(y, x);\n  let result = newerSolve(newState, [nextY, nextX], invalidVals, fixedVals);\n  if (typeof result === 'object' && result.solved === true) return result;\n  if (result === false) {\n    // console.log('FALSE!');\n    invalidVals[y][x] = invalidVals[y][x].concat(tryVal);  // TODO: make immutable\n    const newInvalid = copyState(invalidVals).map((invRow, invY) => {\n      if (invY > y) return invRow.fill([]);\n      if (invY === y) return invRow.fill([], x + 1);\n      return invRow;\n    });\n    newState = undefined;\n    invalidVals = undefined;\n    result = undefined;\n    return newerSolve(state, [y, x], newInvalid, fixedVals);\n  }\n  console.log('how did we get here?');\n}\n\ngenerate();\n\nexport default generate;","// Returns all of the values in the same row, column, and square of a given coordinate\nexport const getAdjacentValues = (state, coord) => {\n  const [y, x] = coord;\n  const xVals = state[y];\n  const yVals = state.map(row => row[x]);\n  const squareVals = getValues(state, getSquareCoords(getSquare(y, x)));\n  return {x: xVals, y: yVals, squareVals: squareVals};\n};\n\n// Returns all of the coordinates in the same row, column, and square of a given coordinate\nexport const getAdjacentCoords = (coord) => {\n  const [y, x] = coord;\n  const xCoords = [0,1,2,3,4,5,6,7,8].map(y => [y, x]).filter(coord => coord[0] !== y);\n  const yCoords = [0,1,2,3,4,5,6,7,8].map(x => [y, x]).filter(coord => coord[1] !== x);\n  const squareCoords = getSquareCoords(getSquare(y, x))\n    .filter(coord => coord[0] !== y || coord[1] !== x);\n  return {x: xCoords, y: yCoords, squareCoords: squareCoords};\n};\n// Same as getAdjacentCoords but includes given coordinate\nconst getAdjacentCoordsInclusive = (coord) => {\n  const [y, x] = coord;\n  const xCoords = [0,1,2,3,4,5,6,7,8].map(y => [y, x]);\n  const yCoords = [0,1,2,3,4,5,6,7,8].map(x => [y, x]);\n  const squareCoords = getSquareCoords(getSquare(y, x));\n  return {x: xCoords, y: yCoords, squareCoords: squareCoords};\n};\n\n// Attempt to find the solution for a given coord\nconst checkForSolution = (state, coord) => {\n  const [y, x] = coord;\n  if (state[y][x]) return state[y][x];\n  const adjacentCoords = getAdjacentCoords(coord);\n  const allowed = getAllowed(state, coord);\n  const xAllowed = getXAllowed(state, coord);\n  const yAllowed = getYAllowed(state, coord);\n  const squareAllowed = getSquareAllowed(state, coord);\n  if (xAllowed.length === 1) return xAllowed[0];\n  if (yAllowed.length === 1) return yAllowed[0];\n  if (squareAllowed.length === 1) return squareAllowed[0];\n\n  const options = getOptions(state, coord);\n  if (allowed.length === 1) {\n    return allowed[0];\n  }\n  if (options.length === 1) {\n    return options[0];\n  }\n  if (allowed.length === 0) {\n    const err = new Error();\n    err.data = {\n      state: state,\n      coords: [y, x],\n    };\n    throw err;  // If there are no options then there was an error earlier\n  }\n\n  // Check what OTHER adjacent nulls CAN'T be\n  // For squares, x-line, and y-line\n  const xNonOptions = getNonOptions(state, adjacentCoords.x);\n  const yNonOptions = getNonOptions(state, adjacentCoords.y);\n  const squareNonOptions = getNonOptions(state, adjacentCoords.squareCoords);\n\n  if (xNonOptions.length === 1) return xNonOptions[0];\n  if (yNonOptions.length === 1) return yNonOptions[0];\n  if (squareNonOptions.length === 1) return squareNonOptions[0];\n\n  // If no solution is found return null\n  return null;\n};\n\n// Detect if multiple coords have the exact same options\n// Detect if the number of coords with the same options is the same as the number of values\n// Remove those values from all other coords\n// Check for x, y, and square coords and then intersect results?\n// Create metastate with new options in place of previous getOptions?\n// Otherwise modify getOptions to use do this automatically?\n\n// test = [\n//     {coord: [2,1], options: [1,2,7,8], mustBeOf: null},\n//     {coord: [5,1], options: [2,7,8], mustBeOf: null},\n//     {coord: [7,1], options: [1,2], mustBeOf: null},\n//     {coord: [8,1], options: [1,2], mustBeOf: null},\n// ];\n\n// If first array contains second array\nconst arrayContainsArray = (containerArray, array) => {\n  return containerArray\n    .filter((item) => {\n      return (\n        Array.isArray(item) &&\n        arrayIntersect(item, array).length === array.length\n      );\n    })\n    .length > 0;\n};\n\nconst arrayIntersect = (...arrs) => {\n  return arrs.reduce((intersecting, arr) => {\n    const set1 = new Set(intersecting), set2 = new Set(arr);\n    return [...set1].filter(val => set2.has(val));\n  }, arrs.pop());\n};\n\nexport const getAllowed = (state, coord) => {\n  const adjacent = getAdjacentValues(state, coord);\n  const adjacentVals = [].concat(adjacent.x, adjacent.y, adjacent.squareVals);\n  return [1,2,3,4,5,6,7,8,9].filter(num => {\n    return !adjacentVals.includes(num);\n  });\n};\nconst getXAllowed = (state, coord) => {\n  const adjacent = getAdjacentValues(state, coord);\n  return [1,2,3,4,5,6,7,8,9].filter(num => {\n    return !adjacent.x.includes(num);\n  });\n};\nconst getYAllowed = (state, coord) => {\n  const adjacent = getAdjacentValues(state, coord);\n  return [1,2,3,4,5,6,7,8,9].filter(num => {\n    return !adjacent.y.includes(num);\n  });\n};\nconst getSquareAllowed = (state, coord) => {\n  const adjacent = getAdjacentValues(state, coord);\n  return [1,2,3,4,5,6,7,8,9].filter(num => {\n    return !adjacent.squareVals.includes(num);\n  });\n};\n\nconst getOptions = (state, coord) => {\n  let allowed = getAllowed(state, coord);\n  const adjCoordsInc = getAdjacentCoordsInclusive(coord);  // Get adjacent coordinates, both num and null\n  const xMatching = findMatching(state, adjCoordsInc.x);\n  const yMatching = findMatching(state, adjCoordsInc.y);\n  const squareMatching = findMatching(state, adjCoordsInc.squareCoords);\n\n  [].concat(xMatching, yMatching, squareMatching).forEach(match => {\n    if (!arraysAreIdentical(allowed, match)) {\n      allowed = allowed.filter(val => !match.includes(val));\n    }\n  });\n  return allowed;\n};\n\nconst findMatching = (state, adjacent) => {\n  const xNullCoords = filterNullCoords(state, adjacent, true);  // Null adjacent coordinates\n  const xExistingVals = getValues(state, filterNullCoords(state, adjacent));  // Non-null values\n  const xNonExistingVals = [1,2,3,4,5,6,7,8,9].filter(num => !xExistingVals.includes(num));  // Vals not in X yet\n  const xEval = xNullCoords.map(coord => ({\n    coord: coord,\n    available: xNonExistingVals,\n    options: getAllowed(state, coord),  // Legal values for coord\n  }));\n  return xEval.reduce((matching, coord) => {\n    // Get all OTHER coords with matching options\n    const matchingOps = xEval\n      .filter(otherCoord => {\n        return arraysAreIdentical(coord.options, otherCoord.options) &&\n          !arraysAreIdentical(coord.coord, otherCoord.coord);\n      });\n\n    if (matchingOps.length === coord.options.length - 1 &&\n      !arrayContainsArray(matching, coord.options)) {\n      return matching.concat([coord.options]);\n    }\n    return matching;\n  }, []);\n};\n\nconst getNonOptions = (state, coords) => {\n  // Get null coordinates\n  const nullCoords = filterNullCoords(state, coords, true);\n  const nonNullCoords = filterNullCoords(state, coords);\n  // Get all values that the null coordinates cannot be,\n  // and that aren't already in the other coordinates\n  const nullCoordNonOptions = nullCoords\n    .reduce((nonOptions, nullCoord) => {\n      // Get all values that the coordinate COULD be\n      const options = getOptions(state, nullCoord);\n      // Add all values that aren't an option for the coordinate\n      return nonOptions\n        .concat([1,2,3,4,5,6,7,8,9]\n          .filter(num => !options.includes(num)));\n    }, [])\n    .filter(option => !getValues(state, nonNullCoords).includes(option));\n  // Get all values that are \"non-options\" for EVERY null coordinate given\n  const remainingNonOptions = nullCoordNonOptions.reduce((nonOptions, option, index, arr) => {\n    if (arr.filter(op => op === option).length === nullCoords.length) {\n      return nonOptions.concat(option);\n    }\n    return nonOptions;\n  }, []);\n  // Return unique values from\n  return Array.from(new Set(remainingNonOptions));\n};\n\nconst getValues = (state, coordinates) => {\n  return coordinates.map(coord => getValue(state, coord));\n};\n\nconst filterNullCoords = (state, coords, onlyNulls = false) => {\n  if (onlyNulls) {\n    return coords.filter(coord => getValue(state, coord) === null);\n  }\n  return coords.filter(coord => getValue(state, coord) !== null);\n};\n\n// Get the value of a given coordinate from the given puzzle state\nconst getValue = (state, coordinate) => state[coordinate[0]][coordinate[1]];\n\n// Get the square (1 through 9) that contains the given coordinates\n// TODO: Consider caching square/coordinate maps to save performance\nconst getSquare = (y, x) => {\n  return [1,2,3,4,5,6,7,8,9].find(square => {\n    return getSquareCoords(square).some(coord => {\n      return arraysAreIdentical(coord, [y, x]);\n    });\n  });\n};\n\n// Get the coordinates contained within in a given square (1 through 9)\nconst getSquareCoords = (square) => {\n  // No reason to calculate this each time, stored data as a property\n  return squareCoordMap[square];\n  // const yMapper = {\n  //   1: [0, 1, 2], 2: [0, 1, 2], 3: [0, 1, 2],\n  //   4: [3, 4, 5], 5: [3, 4, 5], 6: [3, 4, 5],\n  //   7: [6, 7, 8], 8: [6, 7, 8], 9: [6, 7, 8],\n  // };\n  // const xMapper = {\n  //   1: [0, 1, 2], 2: [3, 4, 5], 3: [6, 7, 8],\n  //   4: [0, 1, 2], 5: [3, 4, 5], 6: [6, 7, 8],\n  //   7: [0, 1, 2], 8: [3, 4, 5], 9: [6, 7, 8],\n  // };\n  // const yVals = [].concat(yMapper[square], yMapper[square], yMapper[square]).sort();\n  // const xVals = [].concat(xMapper[square], xMapper[square], xMapper[square]);\n  // return yVals.map((val, index) => [val, xVals[index]]);\n  //\n  // // return yMapper[square].reduce((coords, y) => {\n  // //   return coords.concat(xMapper[square].map(x => [y, x]));\n  // // }, []);\n};\n\nconst getUniqueValues = (array) => Array.from(new Set(array));\n\nexport const arraysAreIdentical = (arr1, arr2) => {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return undefined;\n  if (arr1.length !== arr2.length) return false;\n\n  for (let i = arr1.length; i--;) {\n    if (Array.isArray(arr1[i]) || Array.isArray(arr2[i])) {\n      if (!arraysAreIdentical(arr1[i], arr2[i])) {\n        return false;\n      }\n    } else if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const isSolved = (state) => ![].concat(...state).includes(null);\n\nexport const checkSolutionIsValid = (state) => {\n  const valsAreValid = (arr) => {\n    return arraysAreIdentical([1,2,3,4,5,6,7,8,9], arr.slice().sort());\n  };\n\n  const rows = state;\n  const cols = [0,1,2,3,4,5,6,7,8].map(x => state.map(row => row[x]));\n  const squares = [1,2,3,4,5,6,7,8,9].map(square => getValues(state, getSquareCoords(square)));\n\n  const rowsValid = rows.every(valsAreValid);\n  const colsValid = cols.every(valsAreValid);\n  const squaresValid = squares.every(valsAreValid);\n\n  return rowsValid && colsValid && squaresValid;\n};\n\nconst solveShallow = (state, x = 0, y = 0, prevState = null) => {\n  try {\n    state[y][x] = checkForSolution(state, [y, x]);\n  } catch (error) {\n    // console.log(error);\n    // if (error.data) console.log(printState(error.data.state));\n    return {solved: false, state: state, error: error};\n  }\n\n  if (x === 8 && y === 8) {\n    if (isSolved(state)) {\n      console.log(printState(state));\n      console.log('Solved!');\n      return {solved: true, state: state};\n    }\n    if (prevState !== null) {\n      if (arraysAreIdentical(state, prevState)) {\n        return {solved: false, state: state};  // Break out if no solution found. Prevents infinite recursion\n      }\n    }\n    prevState = copyState(state);\n    return solveShallow(state, 0, 0, prevState);\n  }\n\n  if (x === 8) {\n    return solveShallow(state, 0, y + 1, prevState);\n  }\n\n  return solveShallow(state, x + 1, y, prevState);\n};\n\nconst solveDeep = (state) => {\n  const solveAttempt = solveShallow(state);\n  if (solveAttempt.solved === false) {\n    state = copyState(solveAttempt.state);\n    // Just gonna go ahead and do some heavy nested looping here\n    // For each null cell, get it's possible values,\n    // then try solving it with each one until a correct solution is found\n    const numFilledCells = state.reduce((numFilled, row) => {\n      return row.reduce((numFilled2, cell) => {\n        if (cell) numFilled2++;\n        return numFilled2;\n      }, numFilled);\n    }, 0);\n    // if (numFilledCells < 17) return {solved: false, state: state, error: 'Less than 17 cells'};\n    for (const [y, row] of state.entries()) {\n      for (const [x, val] of row.entries()) {\n        if (val === null) {\n          const options = getOptions(state, [y, x]);\n          if (options.length > 8) continue;\n          for (const option of options) {\n            const testState = copyState(state);\n            testState[y][x] = option;\n            const result = solveShallow(testState);\n            if (result.solved === true) {\n              return result;\n            }\n          }\n        }\n      }\n    }\n  }\n  return solveAttempt;\n};\n\nconst copyState = (state)  => state.map(arr => [...arr]);\n\nexport const printState = (state) => {\n  return state.reduce((text, row, index) => {\n    if (index === 3 || index === 6) {\n      text = text.concat(\"\\n\");  // Add horizontal spacing\n    }\n    const rowString = row.reduce((rowText, val, rowIndex) => {\n      val = val === null ? '_' : val;\n      if (rowIndex === 3 || rowIndex === 6) {\n        rowText = rowText.concat(' ');  // Add vertical spacing\n      }\n      return rowText.concat(' ' + val);\n    }, '');\n    return text.concat(\"|\" + rowString + \" |\\n\");\n  }, '');\n};\n\nconst isValidValue = (val) => [1,2,3,4,5,6,7,8,9].includes(val);\n\nconst parseState = (inputState) => {\n  return inputState.map(row => {\n    return row.map(val => isValidValue(val) ? val : null);\n  });\n};\n\nexport default function solve(startState) {\n  const state = parseState(startState);\n  return solveDeep(state);\n};\n\n// Map of squares to the coordinates they contain\nconst squareCoordMap = {\n  1:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]],\n  2:[[0,3],[0,4],[0,5],[1,3],[1,4],[1,5],[2,3],[2,4],[2,5]],\n  3:[[0,6],[0,7],[0,8],[1,6],[1,7],[1,8],[2,6],[2,7],[2,8]],\n  4:[[3,0],[3,1],[3,2],[4,0],[4,1],[4,2],[5,0],[5,1],[5,2]],\n  5:[[3,3],[3,4],[3,5],[4,3],[4,4],[4,5],[5,3],[5,4],[5,5]],\n  6:[[3,6],[3,7],[3,8],[4,6],[4,7],[4,8],[5,6],[5,7],[5,8]],\n  7:[[6,0],[6,1],[6,2],[7,0],[7,1],[7,2],[8,0],[8,1],[8,2]],\n  8:[[6,3],[6,4],[6,5],[7,3],[7,4],[7,5],[8,3],[8,4],[8,5]],\n  9:[[6,6],[6,7],[6,8],[7,6],[7,7],[7,8],[8,6],[8,7],[8,8]],\n};\n\n//\n// const _ = null;\n// const initialState = [\n//   [2,4,3,9,_,8,_,_,_],\n//   [7,9,_,_,4,_,3,_,8],\n//   [_,_,5,7,6,_,2,9,_],\n//   [_,_,9,8,7,2,4,1,_],\n//   [_,_,7,_,_,_,6,_,_],\n//   [_,2,1,4,3,6,7,_,_],\n//   [_,5,4,_,2,7,8,_,_],\n//   [6,_,8,_,9,_,_,2,7],\n//   [_,_,_,6,_,5,9,4,3]\n// ];\n//\n// const challengingState = [\n//   [1,_,_,_,_,8,_,_,9],\n//   [_,_,2,_,_,_,_,_,8],\n//   [_,8,_,5,4,9,_,_,_],\n//   [_,4,_,2,_,_,9,_,_],\n//   [3,_,9,_,_,_,2,_,1],\n//   [_,_,1,_,_,5,_,4,_],\n//   [_,_,_,9,1,2,_,3,_],\n//   [7,_,_,_,_,_,1,_,_],\n//   [2,_,_,7,_,_,_,_,6]\n// ];\n//\n// const hardState = [\n//   [_,4,_,1,5,_,_,8,3],\n//   [_,3,_,_,6,_,5,_,_],\n//   [6,_,_,_,_,_,_,_,9],\n//   [_,5,_,_,_,_,_,_,_],\n//   [1,_,_,7,_,8,_,_,2],\n//   [_,_,_,_,_,_,_,6,_],\n//   [5,_,_,_,_,_,_,_,4],\n//   [_,_,4,_,8,_,_,7,_],\n//   [8,6,_,_,2,4,_,9,_]\n// ];\n//\n// const fiendishState = [\n//   [_,_,_,5,_,_,_,6,_],\n//   [8,_,9,_,_,_,_,1,_],\n//   [1,6,_,_,8,7,_,_,_],\n//   [3,_,_,_,2,6,_,_,_],\n//   [_,_,7,_,1,_,6,_,_],\n//   [_,_,_,8,5,_,_,_,3],\n//   [_,_,_,4,7,_,_,2,1],\n//   [_,4,_,_,_,_,9,_,8],\n//   [_,8,_,_,_,3,_,_,_]\n// ];\n\n// const solver = new Solver();\n// console.log(printState(fiendishState));\n// console.log(solve(fiendishState));\n\n// const squareData = [1,2,3,4,5,6,7,8,9].map(square => {\n//   return {[square]: solver.getSquareCoords(square)};\n// });\n// console.log(squareData);\n// console.log(JSON.stringify(squareData));\n\n// const sampleState = [\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null],\n//   [null,null,null,null,null,null,null,null,null]\n// ];\n"],"sourceRoot":""}